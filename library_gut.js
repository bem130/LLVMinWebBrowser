var LibraryGLUT={$GLUT:{initTime:null,idleFunc:null,displayFunc:null,keyboardFunc:null,keyboardUpFunc:null,specialFunc:null,specialUpFunc:null,reshapeFunc:null,motionFunc:null,passiveMotionFunc:null,mouseFunc:null,lastX:0,lastY:0,buttons:0,modifiers:0,initWindowWidth:256,initWindowHeight:256,windowX:0,windowY:0,windowWidth:0,windowHeight:0,savePosition:function(a){GLUT.lastX=a.clientX-Module.canvas.offsetLeft;GLUT.lastY=a.clientY-Module.canvas.offsetTop},saveModifiers:function(a){GLUT.modifiers=0;if(a.shiftKey){GLUT.modifiers+=1}if(a.ctrlKey){GLUT.modifiers+=2}if(a.altKey){GLUT.modifiers+=4}},onMousemove:function(a){var c=a.clientX-Module.canvas.offsetLeft;var b=a.clientY-Module.canvas.offsetTop;if(c==GLUT.lastX&&b==GLUT.lastY){return}GLUT.savePosition(a);if(GLUT.buttons==0&&a.target==Module.canvas&&GLUT.passiveMotionFunc){a.preventDefault();GLUT.saveModifiers(a);FUNCTION_TABLE[GLUT.passiveMotionFunc](GLUT.lastX,GLUT.lastY)}else{if(GLUT.buttons!=0&&GLUT.motionFunc){a.preventDefault();GLUT.saveModifiers(a);FUNCTION_TABLE[GLUT.motionFunc](GLUT.lastX,GLUT.lastY)}}},getSpecialKey:function(a){var b=null;switch(a){case 112:b=1;break;case 113:b=2;break;case 114:b=3;break;case 115:b=4;break;case 116:b=5;break;case 117:b=6;break;case 118:b=7;break;case 119:b=8;break;case 120:b=9;break;case 121:b=10;break;case 122:b=11;break;case 123:b=12;break;case 37:b=100;break;case 38:b=101;break;case 39:b=102;break;case 40:b=103;break;case 33:b=104;break;case 34:b=105;break;case 36:b=106;break;case 35:b=107;break;case 45:b=108;break;case 16:case 5:b=112;break;case 6:b=113;break;case 17:case 3:b=114;break;case 4:b=115;break;case 18:case 2:b=116;break;case 1:b=117;break}return b},getASCIIKey:function(c){if(c.ctrlKey||c.altKey||c.metaKey){return null}var a=c.keyCode;if(48<=a&&a<=57){return a}if(65<=a&&a<=90){return c.shiftKey?a:a+32}if(106<=a&&a<=111){return a-106+42}switch(a){case 27:case 32:case 61:return a}var b=c.shiftKey;switch(a){case 186:return b?58:59;case 187:return b?43:61;case 188:return b?60:44;case 189:return b?95:45;case 190:return b?62:46;case 191:return b?63:47;case 219:return b?123:91;case 220:return b?124:47;case 221:return b?125:93;case 222:return b?34:39}return null},onKeydown:function(b){if(GLUT.specialFunc||GLUT.keyboardFunc){var a=GLUT.getSpecialKey(b.keyCode);if(a!==null){if(GLUT.specialFunc){b.preventDefault();GLUT.saveModifiers(b);FUNCTION_TABLE[GLUT.specialFunc](a,GLUT.lastX,GLUT.lastY)}}else{a=GLUT.getASCIIKey(b);if(a!==null&&GLUT.keyboardFunc){b.preventDefault();GLUT.saveModifiers(b);FUNCTION_TABLE[GLUT.keyboardFunc](a,GLUT.lastX,GLUT.lastY)}}}},onKeyup:function(b){if(GLUT.specialUpFunc||GLUT.keyboardUpFunc){var a=GLUT.getSpecialKey(b.keyCode);if(a!==null){if(GLUT.specialUpFunc){b.preventDefault();GLUT.saveModifiers(b);FUNCTION_TABLE[GLUT.specialUpFunc](a,GLUT.lastX,GLUT.lastY)}}else{a=GLUT.getASCIIKey(b);if(a!==null&&GLUT.keyboardUpFunc){b.preventDefault();GLUT.saveModifiers(b);FUNCTION_TABLE[GLUT.keyboardUpFunc](a,GLUT.lastX,GLUT.lastY)}}}},onMouseButtonDown:function(a){GLUT.savePosition(a);GLUT.buttons|=(1<<a.button);if(a.target==Module.canvas&&GLUT.mouseFunc){try{a.target.setCapture()}catch(b){}a.preventDefault();GLUT.saveModifiers(a);FUNCTION_TABLE[GLUT.mouseFunc](a.button,0,GLUT.lastX,GLUT.lastY)}},onMouseButtonUp:function(a){GLUT.savePosition(a);GLUT.buttons&=~(1<<a.button);if(GLUT.mouseFunc){a.preventDefault();GLUT.saveModifiers(a);FUNCTION_TABLE[GLUT.mouseFunc](a.button,1,GLUT.lastX,GLUT.lastY)}},onFullScreenEventChange:function(c){var b;var a;if(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen){b=screen.width;a=screen.height}else{b=GLUT.windowWidth;a=GLUT.windowHeight;document.removeEventListener("fullscreenchange",GLUT.onFullScreenEventChange,true);document.removeEventListener("mozfullscreenchange",GLUT.onFullScreenEventChange,true);document.removeEventListener("webkitfullscreenchange",GLUT.onFullScreenEventChange,true)}Browser.setCanvasSize(b,a);if(GLUT.reshapeFunc){FUNCTION_TABLE[GLUT.reshapeFunc](b,a)}_glutPostRedisplay()},requestFullScreen:function(){var a=Module.canvas["requestFullscreen"]||Module.canvas["requestFullScreen"]||Module.canvas["mozRequestFullScreen"]||Module.canvas["webkitRequestFullScreen"]||(function(){});a.apply(Module.canvas,[])},cancelFullScreen:function(){var a=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||(function(){});a.apply(document,[])}},glutGetModifiers:function(){return GLUT.modifiers},glutInit:function(b,a){GLUT.initTime=Date.now();window.addEventListener("keydown",GLUT.onKeydown,true);window.addEventListener("keyup",GLUT.onKeyup,true);window.addEventListener("mousemove",GLUT.onMousemove,true);window.addEventListener("mousedown",GLUT.onMouseButtonDown,true);window.addEventListener("mouseup",GLUT.onMouseButtonUp,true);__ATEXIT__.push({func:function(){window.removeEventListener("keydown",GLUT.onKeydown,true);window.removeEventListener("keyup",GLUT.onKeyup,true);window.removeEventListener("mousemove",GLUT.onMousemove,true);window.removeEventListener("mousedown",GLUT.onMouseButtonDown,true);window.removeEventListener("mouseup",GLUT.onMouseButtonUp,true);Module.canvas.width=Module.canvas.height=1}})},glutInitWindowSize:function(b,a){Browser.setCanvasSize(GLUT.initWindowWidth=b,GLUT.initWindowHeight=a)},glutInitWindowPosition:function(a,b){},glutGet:function(b){switch(b){case 100:return 0;case 101:return 0;case 102:return Module.canvas.width;case 103:return Module.canvas.height;case 500:return 0;case 501:return 0;case 502:return GLUT.initWindowWidth;case 503:return GLUT.initWindowHeight;case 700:var a=Date.now();return a-GLUT.initTime;default:throw"glutGet("+b+") not implemented yet"}},glutIdleFunc:function(a){var b=function(){if(GLUT.idleFunc){FUNCTION_TABLE[GLUT.idleFunc]();window.setTimeout(b,0)}};if(!GLUT.idleFunc){window.setTimeout(b,0)}GLUT.idleFunc=a},glutTimerFunc:function(c,a,b){window.setTimeout(function(){FUNCTION_TABLE[a](b)},c)},glutDisplayFunc:function(a){GLUT.displayFunc=a},glutKeyboardFunc:function(a){GLUT.keyboardFunc=a},glutKeyboardUpFunc:function(a){GLUT.keyboardUpFunc=a},glutSpecialFunc:function(a){GLUT.specialFunc=a},glutSpecialUpFunc:function(a){GLUT.specialUpFunc=a},glutReshapeFunc:function(a){GLUT.reshapeFunc=a},glutMotionFunc:function(a){GLUT.motionFunc=a},glutPassiveMotionFunc:function(a){GLUT.passiveMotionFunc=a},glutMouseFunc:function(a){GLUT.mouseFunc=a},glutCreateWindow__deps:["$Browser"],glutCreateWindow:function(a){Module.ctx=Browser.createContext(Module.canvas,true,true);return 1},glutReshapeWindow__deps:["$GLUT","glutPostRedisplay"],glutReshapeWindow:function(b,a){GLUT.cancelFullScreen();Browser.setCanvasSize(b,a);if(GLUT.reshapeFunc){FUNCTION_TABLE[GLUT.reshapeFunc](b,a)}_glutPostRedisplay()},glutPositionWindow__deps:["$GLUT","glutPostRedisplay"],glutPositionWindow:function(a,b){GLUT.cancelFullScreen();_glutPostRedisplay()},glutFullScreen__deps:["$GLUT","glutPostRedisplay"],glutFullScreen:function(){GLUT.windowX=0;GLUT.windowY=0;GLUT.windowWidth=Module.canvas.width;GLUT.windowHeight=Module.canvas.height;document.addEventListener("fullscreenchange",GLUT.onFullScreenEventChange,true);document.addEventListener("mozfullscreenchange",GLUT.onFullScreenEventChange,true);document.addEventListener("webkitfullscreenchange",GLUT.onFullScreenEventChange,true);GLUT.requestFullScreen()},glutInitDisplayMode:function(a){},glutSwapBuffers:function(){},glutPostRedisplay:function(){if(GLUT.displayFunc){Browser.requestAnimationFrame(FUNCTION_TABLE[GLUT.displayFunc])}},glutMainLoop__deps:["$GLUT","glutReshapeWindow","glutPostRedisplay"],glutMainLoop:function(){_glutReshapeWindow(Module.canvas.width,Module.canvas.height);_glutPostRedisplay();throw"GLUT mainloop called, simulating infinite loop by throwing so we get right into the JS event loop"}};autoAddDeps(LibraryGLUT,"$GLUT");mergeInto(LibraryManager.library,LibraryGLUT);